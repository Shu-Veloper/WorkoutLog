운동 & 식단 통합 관리 웹사이트 요건정의서 및 설계서

📋 1. 프로젝트 개요
프로젝트명: 운동 & 식단 통합 관리 웹사이트
목표: 사용자가 간단하고 직관적으로 일일 운동을 기록하고, 식단을 관리하며, 체계적으로 건강 목표를 달성할 수 있는 웹 애플리케이션

🎯 2. 주요 요구사항
2.1 전체 레이아웃

Footer Tab 기반 네비게이션: Sticky Footer에 3개의 탭

탭 1: 홈 (Home) - 달력 페이지
탭 2: 기록 (Record) - 운동 기록 페이지
탭 3: 식단 (Nutrition) - 식단 관리 페이지
스타일: Sticky Footer (하단 고정), 활성 탭 하이라이트
색상:

라이트 모드: 배경 흰색, 텍스트 검정색
다크 모드: 배경 검정색, 텍스트 흰색





2.2 Footer Tab 구조
┌─────────────────────────────────────────┐
│                                         │
│         페이지 콘텐츠 영역                │
│         (홈 / 기록 / 식단)              │
│                                         │
├─────────────────────────────────────────┤
│  [Home]      [Record]      [Nutrition]  │  ← Sticky Footer Tab
└─────────────────────────────────────────┘

🏋️ 3. 홈 탭 (운동 기록)
3.1 홈 탭 레이아웃
┌─────────────────────────────────────────┐
│  [달력 보기]  [기록 추가]                 │  ← 스위치 버튼
├─────────────────────────────────────────┤
│                                         │
│     달력 페이지 또는 기록 페이지           │
│     (스위치에 따라 표시)                  │
│                                         │
├─────────────────────────────────────────┤
│   [월/주 선택]  운동 통계 정보 표시       │
│                                         │
├─────────────────────────────────────────┤
│  [Home]    [Record]    [Nutrition]      │
└─────────────────────────────────────────┘
3.2 달력 페이지 (Calendar View)
기능

월별 달력 표시
운동한 날짜 표시 및 운동 부위별 표시 (등, 어깨, 복근, 이두, 삼두, 가슴, 다리, 유산소)
날짜 클릭 시 상세 정보 표시 (Dialog/Modal)
기간별 필터링 옵션

월별 보기
주별 보기


통계 표시

상세 정보 표시

클릭한 날짜의 모든 운동 기록
각 운동별 세트 정보 (중량, 횟수, 시간 등)
당일 총 운동 시간
UI 형태: Dialog 또는 Modal (페이지 전환 없음)

3.3 운동 기록 페이지 (Recording View)
기능

운동 휴식 타이머 (원형)
운동 기록 추가/수정/삭제 기능

운동 기록 워크플로우
```
Step 1: 날짜 선택
    ↓
Step 2: 부위 선택 (10개 카테고리)
    ├─ 세분화: 등, 가슴, 어깨, 이두, 삼두, 다리, 복근
    ├─ 통합: 상체, 하체
    └─ 유산소
    ↓
Step 3: 종목 입력 (자유 입력)
    └─ 유저가 직접 텍스트 입력 (예: "벤치프레스", "풀업")
    ↓
Step 4: 세트 정보 입력
    ├─ 일반 운동: 무게(선택) + 횟수(필수)
    └─ 유산소: 거리(선택) + 시간(필수)
    ↓
Step 5: 저장
    └─ 한 종목 저장 완료, 다음 종목은 Step 1부터 새로 시작
```

세트 정보 상세

일반 운동 (등, 가슴, 어깨, 이두, 삼두, 다리, 복근, 상체, 하체)
- 무게 (kg): 선택 (풀업 등 자체체중 운동은 입력 안 함)
- 횟수 (회): 필수

유산소 (cardio)
- 거리 (km): 선택 (버피 등은 입력 안 함)
- 시간 (초): 필수



운동 기록 예시
```
📅 날짜: 2025-01-15

⏱️ 휴식 타이머

[부위 선택] 등 ▼
[종목 입력] 풀업 (자유 입력)

풀업
├─ 세트 1: × 10회
├─ 세트 2: × 8회 [×]
├─ 세트 3: × 6회 [×]
└─ [+ 세트 추가]

[저장] → 저장 후 다음 종목 입력 가능
```
3.4 중복 기록 방지

동일한 날짜에 중복된 운동 기록이 없도록 설계
같은 날에 운동을 추가로 기록하면 기존 기록에 추가됨 (덮어쓰지 않음)

3.5 운동 통계 (홈 탭 하단)
기간 선택

월별 보기 (기본값)
주별 보기

월별 통계

총 운동 일수: 지난 달 운동한 일수
부위별 운동량: 부위별 비율 (원형 차트)
운동 강도: 총 중량(kg), 총 세트 수
가장 많이 한 운동: TOP 3 운동 종목
운동 Streak: 연속 운동 일수

주별 통계

이번 주 운동 일수: 월~일
일별 운동 시간: 막대 그래프
부위별 분포: 원형 차트
총 중량 추이: 일별 비교


🍽️ 4. 식단 탭 (영양 관리)
4.1 식단 탭 레이아웃
┌─────────────────────────────────────────┐
│  [필요 칼로리 계산]  [식단 기록]           │  ← 스위치 버튼
├─────────────────────────────────────────┤
│                                         │
│   필요 칼로리 페이지 또는 식단 기록 페이지  │
│   (스위치에 따라 표시)                    │
│                                         │
├─────────────────────────────────────────┤
│  [Home]    [Record]    [Nutrition]      │
└─────────────────────────────────────────┘
4.2 필요 칼로리 계산 페이지
기능

사용자의 키, 몸무게 입력
목표 선택 (벌크업, 린메스업, 살빼기, 유지)
필요 칼로리 자동 계산 및 표시

계산 방식
1단계: 기본정보 입력
├─ 키 (cm)
├─ 몸무게 (kg)
├─ 나이 (선택)
└─ 성별 (선택)

2단계: 목표 선택
├─ 벌크업 (Bulking): 칼로리 + 10-20%
├─ 린메스업 (Clean Bulking): 칼로리 + 5-10%
├─ 살빼기 (Cutting): 칼로리 - 15-20%
└─ 유지 (Maintenance): 칼로리 기본값

3단계: 결과 표시
├─ 기초대사량 (BMR): XXX kcal/day
├─ 필요 칼로리: XXX kcal/day
├─ 단백질 권장: XXX g/day
├─ 탄수화물 권장: XXX g/day
└─ 지방 권장: XXX g/day
UI 레이아웃
┌──────────────────────────────────────────┐
│       필요 칼로리 계산기                   │
├──────────────────────────────────────────┤
│                                         │
│  [기본정보]                              │
│  키: [___] cm                           │
│  몸무게: [___] kg                        │
│  나이: [___] (선택)                      │
│  성별: [남성] [여성]                     │
│                                         │
│  [목표 선택]                             │
│  ○ 벌크업      (+10-20%)                │
│  ○ 린메스업    (+5-10%)                 │
│  ● 유지       (기본)                    │
│  ○ 살빼기      (-15-20%)                │
│                                         │
│  [계산 결과]                             │
│  ┌────────────────────────────────────┐ │
│  │ 기초대사량(BMR): 1,800 kcal/day     │ │
│  │ 필요 칼로리: 2,000 kcal/day         │ │
│  ├────────────────────────────────────┤ │
│  │ 단백질: 150g (30%)                 │ │
│  │ 탄수화물: 200g (40%)               │ │
│  │ 지방: 67g (30%)                    │ │
│  └────────────────────────────────────┘ │
│                                         │
│  [계산 결과 저장]  [리셋]               │
│                                         │
└──────────────────────────────────────────┘
4.3 식단 기록 페이지
기능

음식 검색 (음식명 입력)
음식별 영양정보 표시 (칼로리, 단백질, 탄수화물, 지방)
식단 기록 저장
일일 칼로리/영양소 트래킹

음식 데이터 구조
음식명: 계란 (계란 1개 기준)
├─ 칼로리: 78 kcal
├─ 단백질: 6.3g
├─ 탄수화물: 0.6g
├─ 지방: 5.3g
└─ 부위 정보: 전체

음식명: 소고기 (100g 기준)
├─ 칼로리: 200 kcal
├─ 단백질: 26g
├─ 탄수화물: 0g
├─ 지방: 11g
└─ 부위 정보: 소등심

음식명: 닭가슴살 (100g 기준)
├─ 칼로리: 165 kcal
├─ 단백질: 31g
├─ 탄수화물: 0g
├─ 지방: 3.6g
└─ 부위 정보: 전체
식단 기록 UI 레이아웃
┌──────────────────────────────────────────┐
│         오늘 날짜: 2025-01-15            │
├──────────────────────────────────────────┤
│                                         │
│  [오늘의 목표 영양소]                     │
│  ┌────────────────────────────────────┐ │
│  │ 칼로리: 2,000 / 2,000 kcal         │ │
│  │ 단백질: 120 / 150g                 │ │
│  │ 탄수화물: 200 / 200g               │ │
│  │ 지방: 50 / 67g                     │ │
│  └────────────────────────────────────┘ │
│                                         │
│  [음식 검색]                             │
│  ┌────────────────────────────────────┐ │
│  │ 검색: [________계란________] [검색] │ │
│  └────────────────────────────────────┘ │
│                                         │
│  [검색 결과]                             │
│  ┌────────────────────────────────────┐ │
│  │ ○ 계란 (1개, 78 kcal)              │ │
│  │   단백질: 6.3g / 탄수화물: 0.6g    │ │
│  │   지방: 5.3g  [+ 추가]              │ │
│  │                                    │ │
│  │ ○ 계란 흰자 (1개, 17 kcal)         │ │
│  │   단백질: 3.6g / 탄수화물: 0.3g    │ │
│  │   지방: 0.1g  [+ 추가]              │ │
│  │                                    │ │
│  │ ○ 계란말이 (한 줄, 95 kcal)        │ │
│  │   단백질: 7g / 탄수화물: 1g        │ │
│  │   지방: 6g  [+ 추가]                │ │
│  └────────────────────────────────────┘ │
│                                         │
│  [오늘 기록한 음식]                      │
│  ┌────────────────────────────────────┐ │
│  │ 아침:                              │ │
│  │ - 계란 (2개) 156 kcal              │ │
│  │   단백질: 12.6g [×]                │ │
│  │                                    │ │
│  │ 점심:                              │ │
│  │ - 소고기 (100g) 200 kcal           │ │
│  │   단백질: 26g [×]                  │ │
│  │                                    │ │
│  │ 저녁:                              │ │
│  │ - 닭가슴살 (150g) 247 kcal         │ │
│  │   단백질: 46.5g [×]                │ │
│  └────────────────────────────────────┘ │
│                                         │
│  총 섭취: 603 kcal / 85.1g 단백질      │
│                                         │
└──────────────────────────────────────────┘
4.4 음식 데이터 저장 및 관리
데이터 저장 방식

초기 단계: 사전 정의된 음식 데이터베이스 (CSV/JSON에서 로드)
확장 단계: 사용자가 커스텀 음식 추가 가능
향후 계획: AI 영양정보 인식 (이미지에서 음식 감지)

제공할 기본 음식 데이터
단백질 음식:
- 계란 (1개, 2개, etc)
- 소고기 (부위별: 소등심, 안심, 볼, etc)
- 닭가슴살
- 돼지고기
- 생선 (연어, 흰살 생선, etc)
- 두부
- 그릭요거트

탄수화물:
- 쌀 (밥 한 공기, 생쌀 100g, etc)
- 고구마
- 바나나
- 귀리
- 면 (파스타, 우동, etc)

지방:
- 아보카도
- 견과류
- 올리브유
- 치즈

기타:
- 야채 (브로콜리, 시금치, etc)
- 과일 (사과, 오렌지, etc)

📊 5. 데이터베이스 설계

> 📄 **상세 문서:** [db.md](./db.md) 참조

### 테이블 요약
| 테이블명 | 설명 | 데이터 소스 |
|----------|------|-------------|
| users | 사용자 정보 (language 기본값: ja) | 시스템/유저 |
| exercise_categories | 운동 카테고리 (10개 고정) | 시스템 |
| user_exercises | 유저 운동 종목 | 유저 입력 |
| workout_sessions | 운동 세션 (날짜별) | 유저 입력 |
| workout_records | 운동 기록 | 유저 입력 |
| workout_sets | 세트 정보 | 유저 입력 |

### 유저 워크플로우
```
날짜 선택 → 카테고리 선택 → 종목 입력 → 세트 정보 입력
           (10개 카테고리)   (자유 입력)   (무게/횟수 또는
                                          거리/시간)
카테고리:
├─ 세분화: 등, 가슴, 어깨, 이두, 삼두, 다리, 복근
├─ 통합: 상체, 하체 (구분 원하지 않는 사용자용)
└─ 유산소
```


🏗️ 6. 기술 스택
Frontend

Next.js 14+ (App Router)
React 18+
TypeScript
React Calendar
Chart.js 또는 Recharts
Tailwind CSS
shadcn/ui

Backend

Supabase (PostgreSQL + Auth + Real-time)

Database

PostgreSQL (Supabase)

향후 확장

OpenAI Vision API (음식 이미지 인식)
머신러닝 (영양정보 예측)


🎨 7. UI/UX 설계

> ⚠️ **디자인은 개발 중 변경될 수 있음** - 상세 화면 구조는 Figma 또는 실제 구현 참조

### 기본 구조
- Footer Tab 기반 네비게이션 (Home / Record / Nutrition)
- Sticky Footer (하단 고정)
- 반응형 디자인 (모바일 우선)

### 주요 화면
| 화면 | 설명 |
|------|------|
| 홈 (달력) | 월별 운동 기록 확인, 날짜 클릭 시 상세 Modal |
| 기록 | 운동 기록 입력 (카테고리 → 종목 → 세트) |
| 식단 | 칼로리 계산 및 식단 기록 |


🔐 8. 보안 및 권한

Row Level Security (RLS): 사용자는 자신의 데이터만 조회/수정 가능
인증: Supabase Auth (이메일 기반)
데이터 보호: 모든 기록은 user_id로 격리


🌐 9. 다국어(i18n) 지원

9.1 지원 언어
| 언어 | 코드 | 기본값 |
|------|------|--------|
| 일본어 | ja | ✓ (기본) |
| 한국어 | ko | |
| 영어 | en | |

9.2 언어 감지 방식 (우선순위)
```
1. localStorage (사용자가 직접 선택한 경우)
2. 쿠키 (Edge에서 자동 감지한 값)
3. 기본값 (ja)
```

9.3 자동 언어 감지 (Vercel Edge)
```
사용자 접속
    ↓
[Middleware - Edge Runtime]
    ├─ Vercel geo.country로 국가 감지
    │   └─ JP → ja, KR → ko, 그 외 → en
    ├─ Fallback: Accept-Language 헤더 파싱
    └─ 쿠키에 locale 저장
    ↓
[layout.tsx - 서버 컴포넌트]
    ├─ cookies()로 locale 읽기
    └─ LocaleProvider에 initialLocale 전달
    ↓
[LocaleProvider - 클라이언트]
    └─ localStorage 우선, 없으면 initialLocale 사용
```

9.4 구현 파일 구조
```
├── middleware.ts              # Edge에서 국가 감지 + 쿠키 설정
├── contexts/
│   └── LocaleContext.tsx      # 클라이언트 상태 관리
├── messages/
│   ├── ja.json                # 일본어 번역
│   ├── ko.json                # 한국어 번역
│   └── en.json                # 영어 번역
└── app/
    └── layout.tsx             # 서버에서 쿠키 읽어 props 전달
```

9.5 번역 파일 구조 예시
```json
{
  "nav": {
    "calendar": "カレンダー",
    "record": "記録"
  },
  "footer": {
    "home": "ホーム",
    "record": "記録",
    "nutrition": "食事"
  }
}
```

9.6 사용 방법
```tsx
// 컴포넌트에서 번역 사용
const { t, locale, setLocale } = useLocale();

// 번역 텍스트 출력
<span>{t("footer.home")}</span>

// 언어 변경 (쿠키 + localStorage 동시 업데이트)
setLocale("ko");
```


📋 10. 향후 확장 기능 (Optional)
Phase 1 (현재)

운동 기록 기본 CRUD
식단 칼로리 계산 및 기록
기본 음식 데이터베이스
다국어 지원 (한국어, 영어, 일본어) ✅

Phase 2 (다음)

AI 영양정보 인식 (음식 이미지)
목표 진행도 시각화
공유 기능 (SNS 공유)

Phase 3 (향후)

커뮤니티 기능
모바일 앱 (React Native)
푸시 알림
신체 수치 추적 (체중 그래프 등)


✅ 11. 개발 우선순위
Phase 1 (필수) - Week 1-2

 사용자 인증 (회원가입/로그인)
 기본 운동 데이터 DB 구성
 운동 기록 저장/조회 기능
 달력 페이지 (기본)
 기록 페이지 UI

Phase 2 (중요) - Week 3

 달력에 운동 부위별 표시
 상세 정보 Modal
 휴식 타이머
 운동 통계
 Footer Tab 네비게이션

Phase 3 (필수) - Week 4

 필요 칼로리 계산 페이지
 음식 데이터베이스 구성
 식단 기록 기능
 일일 영양소 트래킹
 식단 통계

Phase 4 (선택) - Week 5+

 음식 이미지 인식 (AI)
 고급 통계
 모바일 최적화


📝 12. 변경 이력
1.0　2025-01-30　초기 운동 기록 요건정의서
2.0　2025-01-31　Footer Tab 및 식단 기능 추가
3.0　2025-01-14　다국어(i18n) 지원 추가 - Vercel Edge 기반 자동 언어 감지